import asyncio
from telegram import Bot
from datetime import datetime
import pytz
import random

# –¢–æ–∫–µ–Ω –∏ ID —á–∞—Ç–æ–≤
TOKEN = '7194435988:AAGfGHdjMigOTj14XlANeVt2sZWtB3mS4AI'
USER_IDS = [228193993, 882777450]

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–≤—Ä–µ–º—è –ø–æ UTC+2 ‚Äî –ì–µ—Ä–º–∞–Ω–∏—è)
schedule = {
    "07:00": [
        "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ª—é–±–∏–º–∞—è. –°–¥–µ–ª–∞–π –∑–∞—Ä—è–¥–∫—É) –õ—é —Ç—è!",
        "–°–æ–ª–Ω—ã—à–∫–æ, –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ!  ‚Äî –∑–∞—Ä—è–¥–æ—á–∫–∞ –∂–¥—ë—Ç —Ç–µ–±—è. –ò —è —Å–µ–π—á–∞—Å –Ω–µ –ø—Ä–æ —Ç–µ–ª–µ—Ñ–æ–Ω!",
        "–õ—é–±–∏–º–∞—è, –¥–æ–±—Ä–æ–≥–æ —É—Ç—Ä–∞‚ù§Ô∏è –ø—Ä–æ—Å—ã–ø–∞–π—Å—è. –ú–æ–∂–µ—Ç —É—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞ —Å –ë–æ–Ω–Ω–∏–∫–æ–º?"
    ],
    "08:30": [
        "–ö–∞–∫ —Å–∫–æ—Ä–æ—Ç–µ—á–Ω–æ –≤—Ä–µ–º—è... –ò –∑–∞—Ä—è–¥ü§≠\n*–ë–µ–≥–æ–Ω–∏–∏ –º–æ–≥—É—Ç –æ—á–∏—â–∞—Ç—å –≤–æ–∑–¥—É—Ö –æ—Ç –ø—ã–ª–∏ ‚Äî –∏ –ø—Ä–∏ —ç—Ç–æ–º –≤—ã–≥–ª—è–¥—è—Ç —à–∏–∫–∞—Ä–Ω–æ.*",
        "–ö–∏—Å—è, –ø–æ–¥–∫–ª—é—á–∏ –≤—Å—ë —Ç–∞–∫–∏ –∑–∞—Ä—è–¥–∫—Éüòâ\n*–£ —Å–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º–∞ —Ü–≤–µ—Ç–∫–∏ ‚Äî –≤–æ–≤—Å–µ –Ω–µ –ª–µ–ø–µ—Å—Ç–∫–∏, –∞ –ø—Ä–∏—Ü–≤–µ—Ç–Ω–∏–∫–∏. –£–º–Ω–æ –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è!*",
        "–ù—É –∂–µ ‚Äî –≤—Å—Ç–∞–≤–ª—è–πüòè\n*–ö–∞–ª–ª–∞ ‚Äî —Å–∏–º–≤–æ–ª –∏–∑—è—â–µ—Å—Ç–≤–∞. –ê –±–µ–ª–∞—è ‚Äî –µ—â—ë –∏ –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç–∏. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ, –¥–∞?*",
        "–ö–∞–∫–∏–µ –ø–ª–∞–Ω—ã? üòÅ\n*–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫—Ç—É—Å—ã –º–æ–≥—É—Ç –≤—ã–∂–∏—Ç—å –¥–æ –¥–≤—É—Ö –ª–µ—Ç –±–µ–∑ –≤–æ–¥—ã. –ê —Å–∫–æ–ª—å–∫–æ —Ç–≤–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω ‚Äî –±–µ–∑ –∑–∞—Ä—è–¥–∫–∏?*"
    ],
    "20:00": [
        "–ó–¥–æ—Ä–æ–≤–∞, –∑–∞–µ–±–∞–ª. –ß—ë —Ç–∞–º –ø–æ –∑–∞—Ä—è–¥–∫–µ, –º–∞—Ç—å?üòÅ\n*–†–æ–º–∞—à–∫–∞ –º–æ–∂–µ—Ç –∑–∞–∂–∏–≤–ª—è—Ç—å —Ü–∞—Ä–∞–ø–∏–Ω—ã. –ê —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –∑–∞—Ä—è–¥–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω.*",
        "–ö–∞–∫–æ–π —Å–º—ã—Å–ª –∏–º–µ—Ç—å –∫—Ä—É—Ç–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω, –µ—Å–ª–∏ –æ–Ω —Ä–∞–∑—Ä—è–∂–µ–Ω?)\n*–£ —Ä–∞—Å—Ç–µ–Ω–∏–π —Ç–æ–∂–µ –±—ã–≤–∞–µ—Ç ¬´–≤—ã–≥–æ—Ä–∞–Ω–∏–µ¬ª ‚Äî –±–µ–∑ —Å–≤–µ—Ç–∞ –æ–Ω–∏ –≤—è–Ω—É—Ç.*",
        "–û, –ø—Ä–∏–≤–µ—Ç! üòÅ\n*–ü–∏–æ–Ω ‚Äî —Å–∏–º–≤–æ–ª –ª—é–±–≤–∏ –≤ –ö–∏—Ç–∞–µ. –ü—Ä–æ—Å—Ç–æ —Ñ–∞–∫—Ç. –ù—É –∏ —è —Ç—É—Ç, –∫—Å—Ç–∞—Ç–∏.*",
        "–î–∞–≤–∞–π –¥–æ–≥–æ–≤–æ—Ä–∏–º—Å—è;) –ø–æ–ª—á–∞—Å–∞ —Å–µ–π—á–∞—Å –∏ –ø–æ–ª—á–∞—Å–∞ —É—Ç—Ä–æ–ºüòâ\n*–ï—Å–ª–∏ —Ä–æ–∑–∞ —Ç—ë–º–Ω–µ–µ—Ç ‚Äî –µ–π —Ö–æ–ª–æ–¥–Ω–æ. –ê –µ—Å–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω —Ç—É—Ö–Ω–µ—Ç ‚Äî –µ–º—É –Ω—É–∂–Ω–∞ –∑–∞—Ä—è–¥–∫–∞.*"
    ],
    "22:00": [
        "–£–∂–µ –∑–µ–≤–∞–µ—à—å? ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—É—é –∑–∞—Ä—è–¥–∫—É, –∞ —Å–∞–º–∞ –Ω–∞ –±–æ—á–æ–∫‚ù§Ô∏è\n*–ú–æ–Ω—Å—Ç–µ—Ä–∞ –≤—ã–ø—É—Å–∫–∞–µ—Ç –ª–∏—Å—Ç—å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º —É—Ö–æ–¥–µ.*",
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å...\n*–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ä—Ö–∏–¥–µ–∏ —Ü–≤–µ—Ç—É—Ç –Ω–æ—á—å—é ‚Äî –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–µ –∏–Ω—Ç—Ä–æ–≤–µ—Ä—Ç—ã —Å —Å—é—Ä–ø—Ä–∏–∑–æ–º.*",
        "–í–æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤—å: —Ç—ã —Å–ø–∏—à—å, –∞ —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç –≥–æ–ª–æ–¥–∞ –ø—É—Ö–Ω–µ—Ç...\n*–ê–ª–æ—ç –≤–µ—Ä–∞ –∑–∞–ø–∞—Å–∞–µ—Ç –≤–ª–∞–≥—É. –û–Ω –±—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è, –∞ —Ç—ã?*",
        "–î–µ–Ω—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è!.. —ç—Ç–æ —Ç–æ–Ω–∫–∏–π –Ω–∞–º—ë–∫ üòâüòÅ\n*–¶–≤–µ—Ç—ã –±—Ä—É–Ω–µ—Ä–∞ –ø–æ—Ö–æ–∂–∏ –Ω–∞ –Ω–µ–∑–∞–±—É–¥–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç—É—Ç –≤ —Ç–µ–Ω–∏.*"
    ],
        "23:00": [
        "–ü—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ‚ù§Ô∏è\n*–£ –≥–æ—Ä—Ç–µ–Ω–∑–∏–∏ —Ü–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç pH –ø–æ—á–≤—ã. –¢—ã ‚Äî –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è. –ù–æ –∑–∞—Ä—è–¥ –≤–∞–∂–Ω–µ–µ!*",
        "–£—á—ë–Ω—ã–µ –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ —É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ–≤—É–ª—è—Ü–∏—è –∏ —Ç–µ—á–∫–∞, –∫–æ–≥–¥–∞ –∑–∞—Ä—è–¥–∞ –º–µ–Ω—å—à–µ 20%)) –ü–æ—Ä–∞–¥—É–π –º–∞–ª—ã—à–∞üòâüòÅ\n*–ê –ø–∞—Å—Å–∏—Ñ–ª–æ—Ä–∞ —Ü–≤–µ—Ç—ë—Ç –æ–¥–∏–Ω –¥–µ–Ω—å.*",
        "–ó–∞–±–æ—Ç–∞ ‚Äî –≤ –∑–∞—Ä—è–¥–∫–µ! –ó–∞—Ä—è–¥–∫–∞ ‚Äî –≤ –≥–Ω–µ–∑–¥–µü§≠\n*–£ –∫–∞–ª–∞–¥–∏—É–º–∞ –ª–∏—Å—Ç—å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ ‚Äî –≤–∏–¥–Ω–æ —Å–æ—Å—É–¥—ã. –¢–µ–ª–µ—Ñ–æ–Ω –±—ã –Ω–µ —Å–∫—Ä—ã–ª —Å—Ç—Ä–µ—Å—Å.*",
        "–ú—ã –≤ –æ—Ç–≤–µ—Ç–µ –∑–∞ —Ç–µ—Ö, –∫–æ–≥–æ –Ω–µ –∑–∞—Ä—è–∂–∞–µ–º.\n*–î–∞–∂–µ —Å—É–∫–∫—É–ª–µ–Ω—Ç—ã –Ω–µ —Å–ø—Ä–∞–≤—è—Ç—Å—è —Å —Ö–∞–ª–∞—Ç–Ω–æ—Å—Ç—å—é. –ü–æ–¥–∫–ª—é—á–∞–π.*"
    ]
}

# –¢–∞–π–º–∑–æ–Ω–∞ –ì–µ—Ä–º–∞–Ω–∏–∏
tz = pytz.timezone("Europe/Berlin")
sent_today = set()

async def send_message(bot, text):
    for user_id in USER_IDS:
        try:
            await bot.send_message(chat_id=user_id, text=text, parse_mode="Markdown")
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–ª—è {user_id}: {e}")

async def main():
    bot = Bot(token=TOKEN)
    await send_message(bot, "–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!")

    while True:
        now = datetime.now(tz).strftime("%H:%M")
        print(f"[DEBUG] –°–µ–π—á–∞—Å: {now}")

        if now in schedule and now not in sent_today:
            message = random.choice(schedule[now])
            await send_message(bot, message)
            sent_today.add(now)

        if now == "00:00":
            sent_today.clear()

        await asyncio.sleep(60)

if __name__ == "__main__":
    asyncio.run(main())
